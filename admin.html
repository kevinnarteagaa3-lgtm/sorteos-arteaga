<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Panel Admin ‚Äî Sorteos Arteaga</title>
<style>
  body{background:#0b0b0b;color:#f5f5f5;font-family:Poppins,Arial,sans-serif;margin:0;padding:20px}
  .wrap{max-width:900px;margin:auto}
  .card{background:#111;border:1px solid #333;border-radius:12px;padding:18px}
  h1{text-align:center;color:#d4af37}
  label{display:block;margin-top:12px;font-weight:700;color:#d4af37}
  input,textarea{width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #333;background:#1a1a1a;color:#f5f5f5}
  textarea{min-height:80px}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .col{flex:1;min-width:160px}
  button{background:#d4af37;color:#000;border:none;padding:12px 16px;border-radius:10px;font-weight:800;cursor:pointer;margin-top:16px;width:100%}
  #status{margin-top:12px;color:#aaa}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Panel de Administraci√≥n</h1>
    <label>Logo (URL p√∫blica)</label>
    <input id="logo" type="text">
    <label>Fotos del carrusel (URLs separadas por comas)</label>
    <textarea id="fotos"></textarea>
    <label>Descripci√≥n</label>
    <textarea id="descripcion"></textarea>
    <div class="row">
      <div class="col"><label>WhatsApp</label><input id="whatsapp"></div>
      <div class="col"><label>Precio</label><input id="precio" type="number"></div>
    </div>
    <label>Promociones</label><input id="promociones" type="text">
    <label>M√©todos de pago</label><textarea id="metodos_pago"></textarea>
    <div class="row">
      <div class="col"><label>Total boletos</label><input id="emisiones" type="number"></div>
      <div class="col"><label>Boletos vendidos</label><input id="boletos_vendidos" type="text"></div>
    </div>
    <button id="btnGuardar">üíæ Guardar cambios</button>
    <div id="status"></div>
  </div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwmFuqT3u9ugnkt2GFbYg1oTkD4yhZfyNVvErAxklMxPpsBh5XabdOkTI3daUNWvHf5bQ/exec";

async function cargar(){
  document.getElementById("status").textContent="Cargando...";
  try{
    const res=await fetch(SCRIPT_URL);
    const d=await res.json();
    logo.value=d.logo||"";
    fotos.value=d.fotos||"";
    descripcion.value=d.descripcion||"";
    whatsapp.value=d.whatsapp||"";
    precio.value=d.precio||"";
    promociones.value=d.promociones||"";
    metodos_pago.value=d.metodos_pago||"";
    emisiones.value=d.emisiones||"";
    boletos_vendidos.value=d.boletos_vendidos||"";
    status.textContent="Datos cargados correctamente.";
  }catch(e){status.textContent="Error al cargar.";}
}

btnGuardar.onclick=async()=>{
  const p={
    action:"guardar",
    logo:logo.value,fotos:fotos.value.split(",").map(s=>s.trim()),
    descripcion:descripcion.value,whatsapp:whatsapp.value,
    precio:precio.value,promociones:promociones.value,
    metodos_pago:metodos_pago.value,emisiones:emisiones.value,
    boletos_vendidos:boletos_vendidos.value
  };
  status.textContent="Guardando...";
  try{
    const r=await fetch(SCRIPT_URL,{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify(p)});
    const t=await r.text();
    status.textContent="‚úÖ Guardado: "+t;
  }catch(e){status.textContent="‚ùå Error al guardar.";}
};
cargar();
</script>
</body>
</html>
