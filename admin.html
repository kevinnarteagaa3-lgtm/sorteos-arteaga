<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel de Administraci√≥n - Sorteos Arteaga</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #000;
    color: #FFD700;
    margin: 0;
    padding: 20px;
  }
  h1 {
    text-align: center;
    color: #FFD700;
  }
  form {
    background-color: #111;
    padding: 20px;
    border-radius: 10px;
    max-width: 600px;
    margin: auto;
  }
  label {
    display: block;
    margin-top: 15px;
    font-weight: bold;
  }
  input, textarea {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    border-radius: 5px;
    border: none;
    background-color: #222;
    color: #fff;
  }
  input[type="file"] {
    background-color: transparent;
  }
  button {
    background-color: #FFD700;
    color: #000;
    border: none;
    padding: 10px 20px;
    margin-top: 20px;
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
    width: 100%;
  }
  button:hover {
    background-color: #FFC300;
  }
</style>
</head>
<body>
  <h1>‚öôÔ∏è Panel de Administraci√≥n</h1>
  <form id="adminForm">
    <label>Logo (desde tu fototeca):</label>
    <input type="file" id="logo" accept="image/*">

    <label>Fotos de la rifa (puedes subir varias):</label>
    <input type="file" id="fotos" accept="image/*" multiple>

    <label>Descripci√≥n de la rifa:</label>
    <textarea id="descripcion" rows="3"></textarea>

    <label>M√©todos de pago:</label>
    <textarea id="pagos" rows="2" placeholder="Ejemplo: Tarjeta, OXXO, Transferencia..."></textarea>

    <label>Redes sociales:</label>
    <textarea id="redes" rows="2" placeholder="Facebook, Instagram..."></textarea>

    <label>N√∫mero de WhatsApp para contacto:</label>
    <input type="text" id="whatsapp" placeholder="Ejemplo: +52 5635088487">

    <label>N√∫mero de emisiones:</label>
    <input type="number" id="emisiones" min="1" placeholder="Ejemplo: 10000">

    <button type="button" onclick="guardarDatos()">üíæ Guardar configuraci√≥n</button>
  </form>

  <script>
  const scriptURL = "https://script.google.com/macros/s/AKfycbwhRb4ZuTHg5s7wEVqHLN6vwtcnHO0RPidtaZEqwXxN3__X1taodHGYUNdlqsp8PqEGCw/exec";

  async function guardarDatos() {
    const descripcion = document.getElementById('descripcion').value;
    const pagos = document.getElementById('pagos').value;
    const redes = document.getElementById('redes').value;
    const whatsapp = document.getElementById('whatsapp').value;
    const emisiones = document.getElementById('emisiones').value;

    // Logo y fotos locales convertidas a Base64
    const logoFile = document.getElementById('logo').files[0];
    const fotosFiles = document.getElementById('fotos').files;

    const toBase64 = file => new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => resolve(reader.result);
      reader.onerror = reject;
    });

    const logoBase64 = logoFile ? await toBase64(logoFile) : "";
    const fotosBase64 = [];
    for (let f of fotosFiles) {
      fotosBase64.push(await toBase64(f));
    }

    const data = {
      logo: logoBase64,
      fotos: fotosBase64,
      descripcion,
      pagos,
      redes,
      whatsapp,
      emisiones
    };

    fetch(scriptURL, {
      method: "POST",
      body: JSON.stringify(data),
      headers: { "Content-Type": "application/json" }
    })
    .then(res => res.text())
    .then(() => alert("‚úÖ Datos guardados correctamente en Sheets"))
    .catch(err => alert("‚ùå No se pudo conectar con Sheets: " + err));
  }
  </script>
</body>
</html>
