<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel Admin - Sorteos Arteaga</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #000;
    color: #FFD700;
    padding: 20px;
    text-align: center;
  }
  h1 {
    color: #FFD700;
  }
  label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
  }
  input, textarea {
    width: 90%;
    padding: 8px;
    margin-top: 5px;
    border-radius: 5px;
    border: none;
  }
  textarea {
    height: 60px;
  }
  .file-input {
    background-color: #111;
    padding: 10px;
    border-radius: 8px;
    margin-top: 10px;
  }
  button {
    margin-top: 20px;
    background-color: #FFD700;
    color: #000;
    padding: 10px 20px;
    font-weight: bold;
    border-radius: 5px;
    border: none;
    cursor: pointer;
  }
  button:hover {
    background-color: #FFC300;
  }
  img {
    margin-top: 10px;
    max-width: 150px;
    border-radius: 10px;
  }
</style>
</head>
<body>
<h1>Panel de Administraci√≥n</h1>

<label>Logo (desde tu dispositivo):</label>
<input type="file" id="logoInput" accept="image/*">
<img id="previewLogo" alt="Previsualizaci√≥n del logo">

<label>Fotos del carrusel (puedes subir varias):</label>
<input type="file" id="fotosInput" multiple accept="image/*">

<label>Descripci√≥n:</label>
<textarea id="descripcion"></textarea>

<label>M√©todos de pago:</label>
<textarea id="pagos"></textarea>

<label>Redes sociales:</label>
<textarea id="redes"></textarea>

<label>N√∫mero de WhatsApp (con c√≥digo de pa√≠s, ej. +525635088487):</label>
<input type="text" id="whatsapp">

<label>N√∫mero de emisiones (boletos):</label>
<input type="number" id="emisiones" min="1">

<label>Boletos vendidos (separa por comas, ej. 5, 7, 10):</label>
<input type="text" id="vendidos">

<button onclick="guardarDatos()">üíæ Guardar configuraci√≥n</button>

<p id="mensaje"></p>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbwhRb4ZuTHg5s7wEVqHLN6vwtcnHO0RPidtaZEqwXxN3__X1taodHGYUNdlqsp8PqEGCw/exec";
let logoBase64 = "";
let fotosBase64 = [];

document.getElementById("logoInput").addEventListener("change", function(e) {
  const file = e.target.files[0];
  const reader = new FileReader();
  reader.onload = () => {
    logoBase64 = reader.result;
    document.getElementById("previewLogo").src = reader.result;
  };
  reader.readAsDataURL(file);
});

document.getElementById("fotosInput").addEventListener("change", function(e) {
  fotosBase64 = [];
  const files = e.target.files;
  for (const file of files) {
    const reader = new FileReader();
    reader.onload = () => fotosBase64.push(reader.result);
    reader.readAsDataURL(file);
  }
});

async function guardarDatos() {
  const data = {
    logo: logoBase64,
    fotos: fotosBase64,
    descripcion: document.getElementById("descripcion").value,
    pagos: document.getElementById("pagos").value,
    redes: document.getElementById("redes").value,
    whatsapp: document.getElementById("whatsapp").value,
    emisiones: document.getElementById("emisiones").value,
    vendidos: document.getElementById("vendidos").value
  };

  try {
    const res = await fetch(scriptURL, {
      method: "POST",
      body: JSON.stringify(data)
    });
    document.getElementById("mensaje").innerText = "‚úÖ Configuraci√≥n guardada correctamente.";
  } catch (err) {
    console.error(err);
    document.getElementById("mensaje").innerText = "‚ùå No se pudo conectar con Sheets.";
  }
}
</script>
</body>
</html>
