<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sorteos Arteaga</title>
<style>
  body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#fff;color:#222;}
  header{background:#D4AF37;color:#000;padding:20px;text-align:center;font-weight:bold;font-size:24px;}
  .container{max-width:960px;margin:0 auto;padding:20px;}
  img.logo{max-width:160px;border-radius:10px;margin-bottom:10px;}
  .boletos{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin:20px 0;}
  .boleto{width:60px;height:60px;display:flex;align-items:center;justify-content:center;border-radius:10px;border:1px solid #ccc;cursor:pointer;}
  .boleto.vendido{background:#ccc;color:#fff;cursor:not-allowed;}
  .boleto:hover:not(.vendido){background:#D4AF37;color:#000;}
  .maquinita{margin:20px auto;text-align:center;}
  .btn-spin{padding:10px 20px;background:#D4AF37;color:#000;border:none;border-radius:10px;cursor:pointer;font-weight:bold;}
</style>
</head>
<body>
<header>Sorteos Arteaga</header>
<div class="container" id="contenido">
  <img id="logo" class="logo" alt="Logo">
  <p id="descripcion"></p>
  <p><strong>Precio por boleto:</strong> $<span id="precio"></span></p>
  <p><strong>Promociones:</strong> <span id="promociones"></span></p>
  <p><strong>MÃ©todos de pago:</strong> <span id="metodos_pago"></span></p>
  <div class="maquinita">
    <button class="btn-spin" onclick="spin()">ðŸŽ° Maquinita de la Suerte</button>
    <div id="resultado" style="margin-top:10px;font-weight:bold;"></div>
  </div>
  <h3>Boletos disponibles</h3>
  <div id="boletos" class="boletos"></div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwczcyY2Wy89b5o4Ho60pEg017aAiuzdpdabXUKh1x7SYmptPR9rwBsvhLpKy-tj9Sf3w/exec";

async function cargar() {
  const res = await fetch(SCRIPT_URL);
  const json = await res.json();
  if (!json) return;
  document.getElementById("logo").src = json.logo || "";
  document.getElementById("descripcion").textContent = json.descripcion || "";
  document.getElementById("precio").textContent = json.precio || "";
  document.getElementById("promociones").textContent = json.promociones || "";
  document.getElementById("metodos_pago").textContent = json.metodos_pago || "";
  generarBoletos(json.emisiones, json.boletos_vendidos);
}

function generarBoletos(total, vendidosStr){
  const vendidos = (vendidosStr||"").split(",").map(v=>v.trim());
  const cont = document.getElementById("boletos");
  cont.innerHTML = "";
  for(let i=1;i<=total;i++){
    const div=document.createElement("div");
    div.textContent=i;
    div.className="boleto"+(vendidos.includes(String(i))?" vendido":"");
    if(!vendidos.includes(String(i))){
      div.onclick=()=>apartar(i);
    }
    cont.appendChild(div);
  }
}

function apartar(num){
  alert("Apartaste el boleto NÂ° "+num+" (contacta por WhatsApp para confirmar)");
}

function spin(){
  const r = Math.floor(Math.random()*9999)+1;
  document.getElementById("resultado").textContent = "Tu nÃºmero de la suerte es: "+r;
}

cargar();
</script>
</body>
</html>
