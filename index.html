<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sorteos Arteaga â€” Participa y gana</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<style>
  :root{
    --gold:#D4AF37;
    --bg:#050506;
    --panel:#0f0f11;
    --muted:#9b9b9b;
    --sold:#4b4b4b;
    --white:#ffffff;
    --glass: rgba(255,255,255,0.03);
    --radius:12px;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--white);font-family:Inter,system-ui,Arial,sans-serif;-webkit-font-smoothing:antialiased}
  header{padding:18px 12px;text-align:center}
  .logo-wrap{display:flex;flex-direction:column;align-items:center;gap:6px}
  .logo-wrap img{width:120px;height:120px;object-fit:cover;border-radius:14px;border:3px solid rgba(212,175,55,0.12);background:#0b0b0b}
  .site-title{font-size:22px;color:var(--gold);font-weight:800;letter-spacing:0.6px}
  .site-sub{font-size:13px;color:var(--muted)}
  main{max-width:1200px;margin:18px auto;padding:12px}
  .carousel{margin-top:14px;background:linear-gradient(180deg,#0a0a0a,#0f0f11);padding:12px;border-radius:var(--radius);border:1px solid var(--glass)}
  .carousel-row{display:flex;gap:10px;overflow:auto;padding:6px}
  .carousel-row img{height:140px;border-radius:10px;object-fit:cover}
  .top-grid{display:flex;gap:18px;align-items:flex-start;margin-top:16px;flex-wrap:wrap}
  .left{flex:1;min-width:320px}
  .right{width:340px;min-width:260px}
  .card{background:linear-gradient(180deg,#0b0b0b,#0f0f11);padding:14px;border-radius:12px;border:1px solid var(--glass)}
  .maquina{display:flex;flex-direction:column;gap:8px;align-items:center}
  select,input,textarea{padding:10px;border-radius:10px;border:1px solid #222;background:#080808;color:var(--white);width:100%}
  button.primary{background:var(--gold);color:#000;border:none;padding:10px 14px;border-radius:10px;font-weight:800;cursor:pointer}
  .meta-row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-top:12px}
  .chip{background:#0b0b0b;padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);font-weight:700;color:var(--gold)}
  .methods{margin-top:10px;display:flex;flex-direction:column;gap:8px}
  .methods .row{display:flex;justify-content:space-between;gap:10px;align-items:center;color:#4da3ff;font-weight:700}
  .copy-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:6px 8px;border-radius:8px;color:var(--gold);cursor:pointer}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(64px,1fr));gap:8px;margin-top:18px}
  .num{padding:10px;border-radius:10px;text-align:center;font-weight:800;border:1px solid rgba(212,175,55,0.08);background:#070707;color:var(--gold);cursor:pointer;transition:transform .12s}
  .num:hover{transform:translateY(-6px)}
  .num.seleccionado{background:var(--gold);color:#000;box-shadow:0 10px 30px rgba(212,175,55,0.12)}
  .num.vendido{background:var(--sold);color:#222;border-color:#444;cursor:not-allowed;box-shadow:none;transform:none}
  .floating{position:fixed;right:18px;bottom:18px;z-index:999;display:none}
  .floating button{padding:16px 24px;font-size:16px;border-radius:14px;box-shadow:0 12px 36px rgba(0,0,0,0.6);background:red;color:#fff;font-weight:800;border:none;cursor:pointer}
  .faq{margin-top:18px;text-align:left;color:var(--muted);line-height:1.5}
  .about{margin-top:12px;color:var(--muted)}
  .contact-row{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-top:12px}
  .wa-btn{background:#25D366;color:#000;padding:8px 10px;border-radius:10px;font-weight:700;cursor:pointer;border:none}
  footer{margin-top:28px;padding:18px;text-align:center;color:var(--muted);font-size:13px}
  .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:1000}
  .modal{width:92%;max-width:520px;background:linear-gradient(180deg,#0b0b0b,#111);padding:18px;border-radius:14px;border:1px solid rgba(255,255,255,0.04)}
  .modal h3{color:var(--gold);margin:0 0 10px 0}
  @media (max-width:900px){ .top-grid{flex-direction:column} .right{width:100%} .grid{grid-template-columns:repeat(auto-fill,minmax(48px,1fr))} }
</style>
</head>
<body>

<header>
  <div class="logo-wrap">
    <img id="logo" src="" alt="Logo Sorteos Arteaga">
    <div class="site-title">Sorteos Arteaga</div>
    <div class="site-sub">Participa y gana</div>
  </div>
</header>

<main>
  <div class="carousel card"><div id="carouselRow" class="carousel-row"></div></div>

  <div class="card" style="margin-top:16px;text-align:center">
    <h3 style="margin:0;color:var(--gold)">ðŸ’³ MÃ©todos de Pago</h3>
    <div class="methods" id="methodsArea"></div>
  </div>

  <div class="card" style="margin-top:16px;text-align:center">
    <h3 style="margin:0;color:var(--gold)">ðŸŽ° Maquinita de la Suerte</h3>
    <div style="display:flex;gap:8px;margin-top:10px;justify-content:center;flex-wrap:wrap">
      <select id="maqOpt" style="width:160px">
        <option value="1">1</option><option value="2">2</option><option value="3">3</option>
        <option value="4">4</option><option value="10">10</option><option value="100">100</option><option value="all">Todos</option>
      </select>
      <button id="btnGirar" class="primary">Girar</button>
      <button id="btnSelAll" class="primary" style="background:#c9a531">Seleccionar todos</button>
      <button id="btnLimpiar" style="background:#333;color:#fff;border:none;padding:10px;border-radius:10px">Limpiar</button>
    </div>
  </div>

  <div class="card" style="margin-top:16px">
    <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap">
      <div style="font-weight:800">Lista de boletos</div>
      <div style="color:var(--muted);font-size:13px">Los gris estÃ¡n apartados â€” los dorados disponibles</div>
    </div>
    <div id="counter" style="margin-top:12px;color:var(--gold);font-weight:800"></div>
    <div id="grid" class="grid"></div>
    <div id="selectionText" class="seleccionTxt"></div>
  </div>

  <div class="right">
    <div class="card" style="margin-top:20px">
      <div style="font-weight:800;color:var(--gold)">Acerca de nosotros</div>
      <div class="about">Rifas y sorteos entre amigos en base LoterÃ­a Nacional</div>
    </div>
    <div class="card" style="margin-top:12px">
      <div style="font-weight:800;color:var(--gold)">Preguntas frecuentes</div>
      <div class="faq">
        <strong>Â¿CÃ³mo se elige a los ganadores?</strong>
        <div>En base LoterÃ­a Nacional de MÃ©xico â€” transmisiones en vivo a travÃ©s de nuestras pÃ¡ginas de Facebook e Instagram Sorteos Arteaga.</div><br>
        <strong>Â¿Puedo participar de cualquier parte?</strong>
        <div>SÃ­, puedes participar desde cualquier lugar de la RepÃºblica Mexicana y extranjero.</div><br>
        <strong>Â¿DÃ³nde se publican los ganadores?</strong>
        <div>Se publican en nuestras pÃ¡ginas de Facebook e Instagram Sorteos Arteaga.</div><br>
        <strong>Â¿QuÃ© sucede cuando el nÃºmero ganador es un boleto no vendido o no pagado?</strong>
        <div>Se elige un nuevo ganador realizando la misma dinÃ¡mica y anunciando una nueva fecha del evento.</div>
      </div>
    </div>
  </div>
</main>

<div class="floating" id="floatingBtn"><button id="btnFloating" class="primary">ðŸ“© Apartar (0)</button></div>

<footer>
  Â© 2025 Sorteos Arteaga â€” Basado en LoterÃ­a Nacional
  <div style="margin-top:8px"><small style="color:var(--muted)">Â¿Dudas? WhatsApp: <strong id="footerWa">5635088487</strong></small></div>
</footer>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTXgIMoW1LvdfzyJsFX75DuMWdoNctr7FAexHUz_TTgSgaXWLB5v-WiaZ2De7nYoVRoiQwbFCQi4pIv/pub?gid=0&single=true&output=csv";
const ADMIN_WA = "5635088487";
let CONFIG = {};
let vendidos = new Set(), seleccion = new Set();

const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));

async function loadData(){
  try{
    const res = await fetch(CSV_URL);
    const text = await res.text();
    const rows = text.trim().split('\n').map(r=>r.split(','));
    const headers = rows[0].map(h=>h.trim().toLowerCase());
    CONFIG = {};
    for(let i=1;i<rows.length;i++){
      const row = rows[i];
      if(row[0].toLowerCase()==='config'){
        CONFIG[row[1].trim()] = row[2]?.trim();
      }
    }
    vendidos = new Set((CONFIG.vendidos||"").split(',').map(s=>s.trim()).filter(Boolean));
    render();
  }catch(e){ console.error(e); $('#descripcion').textContent='Error al cargar datos.'; }
}

function render(){
  $('#logo').src = CONFIG.logo||'';
  const fotos = (CONFIG.imagenes||'').split(',').map(x=>x.trim()).filter(Boolean);
  const car = $('#carouselRow'); car.innerHTML='';
  fotos.forEach(f=>{ const img=document.createElement('img'); img.src=f; car.appendChild(img); });
  const metodos = $('#methodsArea'); metodos.innerHTML='';
  (CONFIG.metodos_pago||'').split('\n').forEach(l=>{
    const row=document.createElement('div'); row.className='row';
    const span=document.createElement('div'); span.textContent=l;
    const btn=document.createElement('button'); btn.className='copy-btn'; btn.textContent='Copiar';
    btn.onclick=()=>{navigator.clipboard.writeText(l);btn.textContent='Copiado';setTimeout(()=>btn.textContent='Copiar',1200);}
    row.append(span,btn); metodos.append(row);
  });
  const total=Number(CONFIG.emisiones||100)||100;
  const grid=$('#grid'); grid.innerHTML='';
  for(let i=1;i<=total;i++){
    const label = i.toString().padStart(total>=10000?5:4,'0');
    const el=document.createElement('div'); el.className='num'; el.textContent=label;
    if(vendidos.has(label)){ el.classList.add('vendido'); }
    else{ el.onclick=()=>{ if(el.classList.toggle('seleccionado')) seleccion.add(label); else seleccion.delete(label); updateUI(); }; }
    grid.append(el);
  }
  updateUI();
}

function updateUI(){
  const sel=[...seleccion].sort((a,b)=>a-b);
  $('#selectionText').textContent=sel.length?`Seleccionaste: ${sel.join(', ')}`:'';
  $('#btnFloating').textContent=`ðŸ“© Apartar (${sel.length})`;
  $('#floatingBtn').style.display=sel.length?'block':'none';
}

$('#btnGirar').onclick=()=>{
  const opt=$('#maqOpt').value;
  const disp=$$('.num:not(.vendido)').map(n=>n.textContent);
  seleccion.clear();
  if(opt==='all')disp.forEach(x=>seleccion.add(x));
  else{
    const c=Math.min(Number(opt),disp.length);
    for(let i=0;i<c;i++) seleccion.add(disp.splice(Math.floor(Math.random()*disp.length),1)[0]);
  }
  $$('.num').forEach(n=>n.classList.toggle('seleccionado',seleccion.has(n.textContent)));
  updateUI();
};

$('#btnSelAll').onclick=()=>{
  seleccion=new Set($$('.num:not(.vendido)').map(n=>n.textContent));
  $$('.num').forEach(n=>n.classList.toggle('seleccionado',seleccion.has(n.textContent)));
  updateUI();
};
$('#btnLimpiar').onclick=()=>{seleccion.clear();$$('.num').forEach(n=>n.classList.remove('seleccionado'));updateUI();};

$('#btnFloating').onclick=()=>{
  const sel=[...seleccion].sort((a,b)=>a-b);
  if(!sel.length)return;
  const msg=`Hola Sorteos Arteaga, deseo apartar estos boletos: ${sel.join(', ')}.`;
  window.open(`https://wa.me/${ADMIN_WA}?text=${encodeURIComponent(msg)}`,'_blank');
};

loadData();
</script>
</body>
</html>
