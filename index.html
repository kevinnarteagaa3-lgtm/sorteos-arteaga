<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sorteos Arteaga ‚Äî Participa y gana</title>
<style>
  :root{
    --gold:#D4AF37;
    --blue:#2196F3;
    --bg:#050506;
    --panel:#0f0f11;
    --muted:#9b9b9b;
    --sold:#4b4b4b;
    --white:#ffffff;
    --glass: rgba(255,255,255,0.03);
    --radius:12px;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--white);font-family:Inter,system-ui,Arial,sans-serif;-webkit-font-smoothing:antialiased}
  header{padding:18px 12px;text-align:center}
  .logo-wrap{display:flex;flex-direction:column;align-items:center;gap:6px}
  .logo-wrap img{width:120px;height:120px;object-fit:cover;border-radius:14px;border:3px solid rgba(212,175,55,0.12);background:#0b0b0b}
  .site-title{font-size:22px;color:var(--gold);font-weight:800;letter-spacing:0.6px}
  .site-sub{font-size:14px;color:var(--muted)}
  main{max-width:1200px;margin:18px auto;padding:12px}
  .carousel{margin-top:14px;background:linear-gradient(180deg,#0a0a0a,#0f0f11);padding:12px;border-radius:var(--radius);border:1px solid var(--glass)}
  .carousel-row{display:flex;gap:10px;overflow:auto;padding:6px}
  .carousel-row img{height:140px;border-radius:10px;object-fit:cover}
  .top-grid{display:flex;gap:18px;align-items:flex-start;margin-top:16px;flex-wrap:wrap}
  .left{flex:1;min-width:320px}
  .right{width:340px;min-width:260px}
  .card{background:linear-gradient(180deg,#0b0b0b,#0f0f11);padding:14px;border-radius:12px;border:1px solid var(--glass)}
  .maquina{display:flex;flex-direction:column;gap:8px;align-items:center}
  select,input,textarea{padding:10px;border-radius:10px;border:1px solid #222;background:#080808;color:var(--white);width:100%}
  button.primary{background:var(--gold);color:#000;border:none;padding:10px 14px;border-radius:10px;font-weight:800;cursor:pointer}
  button.primary.red{background:#E53935;color:#fff;font-size:16px;padding:14px 18px;border-radius:12px}
  .methods-title{color:var(--blue);font-weight:800;margin-bottom:8px;text-align:center}
  .methods{margin-bottom:16px;display:flex;flex-direction:column;gap:8px}
  .methods .row{display:flex;justify-content:space-between;gap:10px;align-items:center}
  .copy-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:6px 8px;border-radius:8px;color:var(--gold);cursor:pointer}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(64px,1fr));gap:8px;margin-top:12px}
  .num{padding:10px;border-radius:10px;text-align:center;font-weight:800;border:1px solid rgba(212,175,55,0.08);background:#070707;color:var(--gold);cursor:pointer;transition:transform .12s}
  .num:hover{transform:translateY(-6px)}
  .num.seleccionado{background:var(--gold);color:#000;box-shadow:0 10px 30px rgba(212,175,55,0.12)}
  .num.vendido{background:var(--sold);color:#222;border-color:#444;cursor:not-allowed;box-shadow:none;transform:none}
  .floating{position:fixed;right:18px;bottom:18px;z-index:999;display:none}
  .floating button{padding:14px 18px;border-radius:12px;box-shadow:0 12px 36px rgba(0,0,0,0.6)}
  .seleccionTxt{margin-top:12px;color:var(--gold);font-weight:700;text-align:center}
  .faq{margin-top:18px;text-align:left;color:var(--muted);line-height:1.5}
  .about{margin-top:12px;color:var(--muted)}
  .contact-row{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-top:12px}
  .wa-btn{background:#25D366;color:#000;padding:8px 10px;border-radius:10px;font-weight:700;cursor:pointer;border:none}
  footer{margin-top:28px;padding:18px;text-align:center;color:var(--muted);font-size:13px}
  .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:1000}
  .modal{width:92%;max-width:520px;background:linear-gradient(180deg,#0b0b0b,#111);padding:18px;border-radius:14px;border:1px solid rgba(255,255,255,0.04)}
  .modal h3{color:var(--gold);margin:0 0 10px 0;text-align:center}
  @media (max-width:900px){.top-grid{flex-direction:column}.right{width:100%}.grid{grid-template-columns:repeat(auto-fill,minmax(48px,1fr))}}
</style>
</head>
<body>

<header>
  <div class="logo-wrap">
    <img id="logo" src="" alt="Logo Sorteos Arteaga">
    <div class="site-title">Sorteos Arteaga</div>
    <div class="site-sub">Participa y gana</div>
  </div>
</header>

<main>
  <div class="carousel card">
    <div id="carouselRow" class="carousel-row"></div>
  </div>

  <div class="top-grid">
    <div class="left">
      <div class="card">
        <div class="methods-title">üí≥ M√âTODOS DE PAGO</div>
        <div class="methods" id="methodsArea"></div>

        <div class="maquina">
          <h3 style="margin:0;color:var(--gold)">üé∞ Maquinita de la Suerte</h3>
          <div style="display:flex;gap:8px;margin-top:10px;justify-content:center;flex-wrap:wrap">
            <select id="maqOpt" style="width:160px">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="10">10</option>
              <option value="100">100</option>
              <option value="all">Todos</option>
            </select>
            <button id="btnGirar" class="primary">Girar</button>
          </div>
          <div id="maqResult" class="seleccionTxt"></div>
          <button id="btnApartarMaq" class="primary red" style="display:none;">üì© Apartar seleccionados</button>
        </div>

        <div style="margin-top:14px">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
            <div style="font-weight:800">Lista de boletos</div>
            <div style="color:var(--muted);font-size:13px">Los gris est√°n apartados ‚Äî los dorados disponibles</div>
          </div>
          <div id="counter" style="margin-top:12px;color:var(--gold);font-weight:800;text-align:center"></div>
          <div id="grid" class="grid"></div>
        </div>
      </div>
    </div>

    <div class="right">
      <div class="card">
        <div style="font-weight:800;color:var(--gold)">Informaci√≥n</div>
        <div id="descripcion" class="about" style="margin-top:8px">Cargando descripci√≥n...</div>
        <div class="contact-row">
          <div style="color:var(--muted)">Enviar preguntas:</div>
          <div><button class="wa-btn" id="btnPregWhats">WhatsApp</button></div>
        </div>
        <div style="margin-top:10px;color:var(--muted);font-size:13px">Legalidad y transparencia: Basados en la Loter√≠a Nacional</div>
      </div>

      <div class="card" style="margin-top:12px">
        <div style="font-weight:800;color:var(--gold)">Acerca de nosotros</div>
        <div class="about" style="margin-top:8px">Rifas y sorteos entre amigos en base Loter√≠a Nacional</div>
      </div>

      <div class="card" style="margin-top:12px">
        <div style="font-weight:800;color:var(--gold)">Preguntas frecuentes</div>
        <div class="faq">
          <strong>¬øC√≥mo se elige a los ganadores?</strong>
          <div>En base Loter√≠a Nacional de M√©xico ‚Äî transmisiones en vivo a trav√©s de nuestras p√°ginas de Facebook e Instagram Sorteos Arteaga.</div><br>
          <strong>¬øPuedo participar de cualquier parte?</strong>
          <div>S√≠, puedes participar desde cualquier lugar de la Rep√∫blica Mexicana y extranjero.</div><br>
          <strong>¬øD√≥nde se publican los ganadores?</strong>
          <div>Se publican en nuestras p√°ginas de Facebook e Instagram Sorteos Arteaga.</div><br>
          <strong>¬øQu√© sucede cuando el n√∫mero ganador es un boleto no vendido o no pagado?</strong>
          <div>Se elige un nuevo ganador realizando la misma din√°mica y anunciando una nueva fecha del evento.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- modal -->
  <div id="modalBack" class="modal-back">
    <div class="modal">
      <h3>üì© Apartar boletos</h3>
      <div style="margin-bottom:8px">
        <label style="font-weight:700;color:var(--gold)">N√∫meros seleccionados</label>
        <input id="modalNums" readonly>
      </div>
      <div style="margin-bottom:8px">
        <label style="font-weight:700;color:var(--gold)">Nombre completo</label>
        <input id="modalNombre" placeholder="Ej. Juan P√©rez">
      </div>
      <div style="margin-bottom:8px">
        <label style="font-weight:700;color:var(--gold)">Estado</label>
        <select id="modalEstado">
          <option value="">Selecciona estado</option>
          <option>Aguascalientes</option><option>Baja California</option><option>Ciudad de M√©xico</option><option>Jalisco</option><option>Veracruz</option><option>Yucat√°n</option>
        </select>
      </div>
      <div style="margin-bottom:8px">
        <label style="font-weight:700;color:var(--gold)">Tel√©fono (opcional)</label>
        <input id="modalTelefono" placeholder="Ej. 521XXXXXXXXXX">
      </div>
      <div style="display:flex;gap:8px">
        <button id="modalEnviar" class="primary red">‚úâÔ∏è Enviar y apartar</button>
        <button id="modalCerrar" style="background:#333;color:#fff;border:none;padding:10px;border-radius:8px">Cancelar</button>
      </div>
    </div>
  </div>
</main>

<footer>
  ¬© 2025 Sorteos Arteaga ‚Äî Legalidad y transparencia (basados en Loter√≠a Nacional)
  <div style="margin-top:8px"><small>¬øDudas? WhatsApp: <strong id="footerWa">5635088487</strong></small></div>
</footer>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzl8-sfJRysbmx8ohQbNbmG-1jt0zX15s5Foth6bordIO_JPkEVPks681EZBSEo_7hUtQ/exec";
const ADMIN_WA = "5635088487";
let CONFIG = {};
let seleccion = new Set(), vendidos = new Set();

function padNumber(i,total){return i.toString().padStart(total>=10000?5:4,'0');}
function $(s){return document.querySelector(s);}
function $$(s){return Array.from(document.querySelectorAll(s));}

async function loadConfig(){
 try{
  const r=await fetch(SCRIPT_URL);const d=await r.json();CONFIG=d;
  CONFIG.fotos=(CONFIG.fotos||"").toString().split(",").filter(Boolean);
  CONFIG.boletos_vendidos=(CONFIG.boletos_vendidos||"").toString().split(",").filter(Boolean);
  vendidos=new Set(CONFIG.boletos_vendidos);renderAll();
 }catch(e){console.error(e);}
}

function renderAll(){
 const car=$('#carouselRow');car.innerHTML='';
 CONFIG.fotos.forEach(src=>{let i=document.createElement('img');i.src=src;car.appendChild(i)});
 $('#logo').src=CONFIG.logo||'';$('#descripcion').textContent=CONFIG.descripcion||'';
 $('#footerWa').textContent=CONFIG.whatsapp||ADMIN_WA;
 $('#btnPregWhats').onclick=()=>window.open(`https://wa.me/${CONFIG.whatsapp||ADMIN_WA}`,'_blank');
 const m=$('#methodsArea');m.innerHTML='';
 (CONFIG.metodos_pago||'').toString().split('\n').forEach(line=>{
  if(!line.trim())return;
  const row=document.createElement('div');row.className='row';
  const span=document.createElement('div');span.textContent=line;span.style.color='#ddd';
  const btn=document.createElement('button');btn.className='copy-btn';btn.textContent='Copiar';
  btn.onclick=()=>{navigator.clipboard.writeText(line);btn.textContent='Copiado';setTimeout(()=>btn.textContent='Copiar',1200)};
  row.appendChild(span);row.appendChild(btn);m.appendChild(row);
 });
 const total=Number(CONFIG.emisiones)||0;$('#counter').textContent=`üéüÔ∏è ${total} boletos ‚Äî ${total-(CONFIG.boletos_vendidos||[]).length} disponibles`;
 renderGrid(total);
}

function renderGrid(total){
 const g=$('#grid');g.innerHTML='';
 for(let i=1;i<=total;i++){
  const n=padNumber(i,total),div=document.createElement('div');div.className='num';div.textContent=n;
  if(vendidos.has(n)){div.classList.add('vendido');}
  else{div.onclick=()=>{div.classList.toggle('seleccionado');if(div.classList.contains('seleccionado'))seleccion.add(n);else seleccion.delete(n);updateSel();};}
  g.appendChild(div);
 }
}

function updateSel(){
 const arr=[...seleccion].sort((a,b)=>a-b);
 $('#maqResult').textContent=arr.length?`üéüÔ∏è ${arr.join(', ')}`:'';
 $('#btnApartarMaq').style.display=arr.length?'block':'none';
}

$('#btnGirar').onclick=()=>{
 const opt=$('#maqOpt').value;
 const disp=$$('.num:not(.vendido)').map(e=>e.textContent);
 seleccion.clear();
 if(opt==='all'){disp.forEach(n=>seleccion.add(n));}
 else{
  for(let i=0;i<Number(opt)&&disp.length;i++){const idx=Math.floor(Math.random()*disp.length);seleccion.add(disp.splice(idx,1)[0]);}
 }
 $$('.num').forEach(n=>n.classList.toggle('seleccionado',seleccion.has(n.textContent)));
 updateSel();
};

$('#btnApartarMaq').onclick=openModal;
$('#modalCerrar').onclick=()=>$('#modalBack').style.display='none';
function openModal(){
 const sel=[...seleccion];if(!sel.length)return alert('Selecciona al menos un n√∫mero.');
 $('#modalNums').value=sel.join(', ');$('#modalBack').style.display='flex';
}
$('#modalEnviar').onclick=()=>{
 const nombre=$('#modalNombre').value.trim(),estado=$('#modalEstado').value,telefono=$('#modalTelefono').value.trim(),nums=$('#modalNums').value;
 if(!nombre||!estado||!nums)return alert('Completa todos los datos.');
 const msg=`Hola Sorteos Arteaga, deseo apartar estos boletos: ${nums}.%0ANombre: ${nombre}%0AEstado: ${estado}%0ATel√©fono: ${telefono}`;
 window.open(`https://wa.me/${ADMIN_WA}?text=${msg}`,'_blank');
 $('#modalBack').style.display='none';
 seleccion.clear();$$('.num.seleccionado').forEach(n=>n.classList.remove('seleccionado'));
}
loadConfig();
</script>
</body>
</html>
