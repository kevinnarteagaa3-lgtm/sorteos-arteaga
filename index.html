<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sorteos Arteaga</title>
<style>
  body {
    background-color: #111;
    color: #ffcc00;
    font-family: Arial, sans-serif;
    text-align: center;
  }
  img.logo { width: 120px; margin: 10px auto; display: block; }
  .carrusel img { width: 90%; max-width: 400px; border-radius: 10px; margin: 10px auto; }
  .boletos { display: flex; flex-wrap: wrap; justify-content: center; }
  .boleto {
    width: 50px; height: 50px; margin: 4px; display: flex;
    align-items: center; justify-content: center;
    border-radius: 6px; cursor: pointer; font-weight: bold;
  }
  .disponible { background: #ffcc00; color: #111; }
  .vendido { background: #555; color: #aaa; cursor: not-allowed; }
  button { margin-top: 10px; padding: 10px; background: #ffcc00; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }
  button:hover { background: #ffaa00; }
</style>
</head>
<body>

<img class="logo" id="logo" src="">
<h2 id="descripcion"></h2>

<div class="carrusel" id="carrusel"></div>

<h3>Métodos de pago</h3>
<p id="pagos"></p>

<h3>Redes Sociales</h3>
<p id="redes"></p>

<h3>WhatsApp</h3>
<p id="whatsapps"></p>

<h3>Selecciona tus números</h3>
<div class="boletos" id="boletos"></div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbxtK3de3r3txVgVCpQm4bmAjbt4wZXdmQ-RRv61hx24J0l4MIepyJo0pg6JjlOtKMsk/exec";

async function cargarDatos() {
  const res = await fetch(scriptURL);
  const data = await res.json();
  const d = data[data.length - 1];

  document.getElementById("logo").src = d.logo;
  document.getElementById("descripcion").innerText = d.descripcion;
  document.getElementById("pagos").innerText = d.pagos;
  document.getElementById("redes").innerHTML = `
    Facebook: ${d.redes.facebook}<br>
    Instagram: ${d.redes.instagram}<br>
    TikTok: ${d.redes.tiktok}
  `;
  document.getElementById("whatsapps").innerHTML = d.whatsapp.join("<br>");

  const carrusel = document.getElementById("carrusel");
  d.fotos.forEach(f => {
    const img = document.createElement("img");
    img.src = f;
    carrusel.appendChild(img);
  });

  const cont = document.getElementById("boletos");
  cont.innerHTML = "";
  for (let i = 1; i <= d.emisiones; i++) {
    const b = document.createElement("div");
    b.className = "boleto " + (d.boletosVendidos.includes(i.toString()) ? "vendido" : "disponible");
    b.innerText = i;
    if (!d.boletosVendidos.includes(i.toString())) {
      b.onclick = () => apartarNumero(i, d.whatsapp[0]);
    }
    cont.appendChild(b);
  }
}

function apartarNumero(num, whatsapp) {
  const nombre = prompt("Tu nombre completo:");
  const estado = prompt("Estado:");
  const mensaje = `Hola! Quiero apartar el número ${num} del sorteo. Soy ${nombre} de ${estado}.`;
  window.open(`https://wa.me/${whatsapp.replace(/\D/g, '')}?text=${encodeURIComponent(mensaje)}`, "_blank");
}

cargarDatos();
</script>

</body>
</html>
